<div class="min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
  <app-header
    [isAuthenticated]="isAuthenticated()"
    [theme]="theme()"
    [activeUser]="activeUser()"
    [currentUserData]="currentUserData()"
    (themeToggle)="handleThemeToggle()"
    (userSwitch)="handleUserSwitch($event)"
    (logout)="handleLogout()"
    (viewChange)="handleViewChange($event)"
  ></app-header>

  <div class="flex flex-1">
    @if (isAuthenticated()) {
      <app-sidebar [activeView]="activeView()" (viewChange)="handleViewChange($event)"></app-sidebar>
    }

    <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto">
      @switch (activeView()) {
        @case ('hero') {
          <app-hero (login)="handleLogin($event)"></app-hero>
        }
        @case ('dashboard') {
          <app-dashboard [userData]="currentUserData()"></app-dashboard>
        }
        @case ('check-fit') {
          <app-check-fit (scanSaved)="handleScanSaved($event)"></app-check-fit>
        }
        @case ('history') {
          <app-history [history]="currentUserData().history"></app-history>
        }
        @case ('pricing') {
          <app-pricing></app-pricing>
        }
        @case ('feedback') {
          <app-feedback></app-feedback>
        }
      }
    </main>
  </div>
  
  <app-footer></app-footer>
</div>
